{"ast":null,"code":"import React,{useEffect,useReducer}from'react';import{Link,useParams}from'react-router-dom';import{getAll,getAllStatus}from'../../services/orderService';import classes from'./ordersPage.module.css';import Title from'../../components/Title/Title';import DateTime from'../../components/DateTime/DateTime';import Price from'../../components/Price/Price';import NotFound from'../../components/NotFound/NotFound';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const initialState={};const reducer=(state,action)=>{const{type,payload}=action;switch(type){case'ALL_STATUS_FETCHED':return{...state,allStatus:payload};case'ORDERS_FETCHED':return{...state,orders:payload};default:return state;}};export default function OrdersPage(){const[{allStatus,orders},dispatch]=useReducer(reducer,initialState);const{filter}=useParams();useEffect(()=>{getAllStatus().then(status=>{dispatch({type:'ALL_STATUS_FETCHED',payload:status});});getAll(filter).then(orders=>{dispatch({type:'ORDERS_FETCHED',payload:orders});});},[filter]);return/*#__PURE__*/_jsxs(\"div\",{className:classes.container,children:[/*#__PURE__*/_jsx(Title,{title:\"Orders\",margin:\"1.5rem 0 0 .2rem\",fontSize:\"1.9rem\"}),allStatus&&/*#__PURE__*/_jsxs(\"div\",{className:classes.all_status,children:[/*#__PURE__*/_jsx(Link,{to:\"/orders\",className:!filter?classes.selected:'',children:\"All\"}),allStatus.map(state=>/*#__PURE__*/_jsx(Link,{className:state==filter?classes.selected:'',to:`/orders/${state}`,children:state},state))]}),(orders===null||orders===void 0?void 0:orders.length)===0&&/*#__PURE__*/_jsx(NotFound,{linkRoute:filter?'/orders':'/',linkText:filter?'Show All':'Go To Home Page'}),orders&&orders.map(order=>/*#__PURE__*/_jsxs(\"div\",{className:classes.order_summary,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.header,children:[/*#__PURE__*/_jsx(\"span\",{children:order.id}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(DateTime,{date:order.createdAt})}),/*#__PURE__*/_jsx(\"span\",{children:order.status})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.items,children:order.items.map(item=>/*#__PURE__*/_jsx(Link,{to:`/food/${item.food.id}`,children:/*#__PURE__*/_jsx(\"img\",{src:item.food.imageUrl,alt:item.food.name})},item.food.id))}),/*#__PURE__*/_jsxs(\"div\",{className:classes.footer,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:`/track/${order.id}`,children:\"Show Order\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:classes.price,children:/*#__PURE__*/_jsx(Price,{price:order.totalPrice})})})]})]},order.id))]});}","map":{"version":3,"names":["React","useEffect","useReducer","Link","useParams","getAll","getAllStatus","classes","Title","DateTime","Price","NotFound","jsx","_jsx","jsxs","_jsxs","initialState","reducer","state","action","type","payload","allStatus","orders","OrdersPage","dispatch","filter","then","status","className","container","children","title","margin","fontSize","all_status","to","selected","map","length","linkRoute","linkText","order","order_summary","header","id","date","createdAt","items","item","food","src","imageUrl","alt","name","footer","price","totalPrice"],"sources":["E:/Earth-surface-food/frontend/src/pages/Orders/OrdersPage.js"],"sourcesContent":["import React, { useEffect, useReducer } from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { getAll, getAllStatus } from '../../services/orderService';\r\nimport classes from './ordersPage.module.css';\r\nimport Title from '../../components/Title/Title';\r\nimport DateTime from '../../components/DateTime/DateTime';\r\nimport Price from '../../components/Price/Price';\r\nimport NotFound from '../../components/NotFound/NotFound';\r\n\r\nconst initialState = {};\r\nconst reducer = (state, action) => {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case 'ALL_STATUS_FETCHED':\r\n      return { ...state, allStatus: payload };\r\n    case 'ORDERS_FETCHED':\r\n      return { ...state, orders: payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default function OrdersPage() {\r\n  const [{ allStatus, orders }, dispatch] = useReducer(reducer, initialState);\r\n\r\n  const { filter } = useParams();\r\n\r\n  useEffect(() => {\r\n    getAllStatus().then(status => {\r\n      dispatch({ type: 'ALL_STATUS_FETCHED', payload: status });\r\n    });\r\n    getAll(filter).then(orders => {\r\n      dispatch({ type: 'ORDERS_FETCHED', payload: orders });\r\n    });\r\n  }, [filter]);\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <Title title=\"Orders\" margin=\"1.5rem 0 0 .2rem\" fontSize=\"1.9rem\" />\r\n\r\n      {allStatus && (\r\n        <div className={classes.all_status}>\r\n          <Link to=\"/orders\" className={!filter ? classes.selected : ''}>\r\n            All\r\n          </Link>\r\n          {allStatus.map(state => (\r\n            <Link\r\n              key={state}\r\n              className={state == filter ? classes.selected : ''}\r\n              to={`/orders/${state}`}\r\n            >\r\n              {state}\r\n            </Link>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {orders?.length === 0 && (\r\n        <NotFound\r\n          linkRoute={filter ? '/orders' : '/'}\r\n          linkText={filter ? 'Show All' : 'Go To Home Page'}\r\n        />\r\n      )}\r\n\r\n      {orders &&\r\n        orders.map(order => (\r\n          <div key={order.id} className={classes.order_summary}>\r\n            <div className={classes.header}>\r\n              <span>{order.id}</span>\r\n              <span>\r\n                <DateTime date={order.createdAt} />\r\n              </span>\r\n              <span>{order.status}</span>\r\n            </div>\r\n            <div className={classes.items}>\r\n              {order.items.map(item => (\r\n                <Link key={item.food.id} to={`/food/${item.food.id}`}>\r\n                  <img src={item.food.imageUrl} alt={item.food.name} />\r\n                </Link>\r\n              ))}\r\n            </div>\r\n            <div className={classes.footer}>\r\n              <div>\r\n                <Link to={`/track/${order.id}`}>Show Order</Link>\r\n              </div>\r\n              <div>\r\n                <span className={classes.price}>\r\n                  <Price price={order.totalPrice} />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}