{"ast":null,"code":"import _regeneratorRuntime from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import classes from'./foodsAdminPage.module.css';import{Link,useParams}from'react-router-dom';import{deleteById,getAll,search}from'../../services/foodService';import NotFound from'../../components/NotFound/NotFound';import Title from'../../components/Title/Title';import Search from'../../components/Search/Search';import Price from'../../components/Price/Price';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function FoodsAdminPage(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),foods=_useState2[0],setFoods=_useState2[1];var _useParams=useParams(),searchTerm=_useParams.searchTerm;useEffect(function(){loadFoods();},[searchTerm]);var loadFoods=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var foods;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!searchTerm){_context.next=6;break;}_context.next=3;return search(searchTerm);case 3:_context.t0=_context.sent;_context.next=9;break;case 6:_context.next=8;return getAll();case 8:_context.t0=_context.sent;case 9:foods=_context.t0;setFoods(foods);case 11:case\"end\":return _context.stop();}},_callee);}));return function loadFoods(){return _ref.apply(this,arguments);};}();var FoodsNotFound=function FoodsNotFound(){if(foods&&foods.length>0)return;return searchTerm?/*#__PURE__*/_jsx(NotFound,{linkRoute:\"/admin/foods\",linkText:\"Show All\"}):/*#__PURE__*/_jsx(NotFound,{linkRoute:\"/dashboard\",linkText:\"Back to dashboard!\"});};var deleteFood=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(food){var confirmed;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:confirmed=window.confirm(\"Delete Food \".concat(food.name,\"?\"));if(confirmed){_context2.next=3;break;}return _context2.abrupt(\"return\");case 3:_context2.next=5;return deleteById(food.id);case 5:toast.success(\"\\\"\".concat(food.name,\"\\\" Has Been Removed!\"));setFoods(foods.filter(function(f){return f.id!==food.id;}));case 7:case\"end\":return _context2.stop();}},_callee2);}));return function deleteFood(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:classes.container,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.list,children:[/*#__PURE__*/_jsx(Title,{title:\"Manage Foods\",margin:\"1rem auto\"}),/*#__PURE__*/_jsx(Search,{searchRoute:\"/admin/foods/\",defaultRoute:\"/admin/foods\",margin:\"1rem 0\",placeholder:\"Search Foods\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/addFood\",className:classes.add_food,children:\"Add Food +\"}),/*#__PURE__*/_jsx(FoodsNotFound,{}),foods&&foods.map(function(food){return/*#__PURE__*/_jsxs(\"div\",{className:classes.list_item,children:[/*#__PURE__*/_jsx(\"img\",{src:food.imageUrl,alt:food.name}),/*#__PURE__*/_jsx(Link,{to:'/food/'+food.id,children:food.name}),/*#__PURE__*/_jsx(Price,{price:food.price}),/*#__PURE__*/_jsxs(\"div\",{className:classes.actions,children:[/*#__PURE__*/_jsx(Link,{to:'/admin/editFood/'+food.id,children:\"Edit\"}),/*#__PURE__*/_jsx(Link,{onClick:function onClick(){return deleteFood(food);},children:\"Delete\"})]})]},food.id);})]})});}","map":{"version":3,"names":["useEffect","useState","classes","Link","useParams","deleteById","getAll","search","NotFound","Title","Search","Price","toast","jsx","_jsx","jsxs","_jsxs","FoodsAdminPage","_useState","_useState2","_slicedToArray","foods","setFoods","_useParams","searchTerm","loadFoods","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","t0","sent","stop","apply","arguments","FoodsNotFound","length","linkRoute","linkText","deleteFood","_ref2","_callee2","food","confirmed","_callee2$","_context2","window","confirm","concat","name","abrupt","id","success","filter","f","_x","className","container","children","list","title","margin","searchRoute","defaultRoute","placeholder","to","add_food","map","list_item","src","imageUrl","alt","price","actions","onClick"],"sources":["E:/foodiespaw/frontend/src/pages/FoodsAdmin/FoodsAdminPage.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport classes from './foodsAdminPage.module.css';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { deleteById, getAll, search } from '../../services/foodService';\r\nimport NotFound from '../../components/NotFound/NotFound';\r\nimport Title from '../../components/Title/Title';\r\nimport Search from '../../components/Search/Search';\r\nimport Price from '../../components/Price/Price';\r\nimport { toast } from 'react-toastify';\r\n\r\nexport default function FoodsAdminPage() {\r\n  const [foods, setFoods] = useState();\r\n  const { searchTerm } = useParams();\r\n\r\n  useEffect(() => {\r\n    loadFoods();\r\n  }, [searchTerm]);\r\n\r\n  const loadFoods = async () => {\r\n    const foods = searchTerm ? await search(searchTerm) : await getAll();\r\n    setFoods(foods);\r\n  };\r\n\r\n  const FoodsNotFound = () => {\r\n    if (foods && foods.length > 0) return;\r\n\r\n    return searchTerm ? (\r\n      <NotFound linkRoute=\"/admin/foods\" linkText=\"Show All\" />\r\n    ) : (\r\n      <NotFound linkRoute=\"/dashboard\" linkText=\"Back to dashboard!\" />\r\n    );\r\n  };\r\n\r\n  const deleteFood = async food => {\r\n    const confirmed = window.confirm(`Delete Food ${food.name}?`);\r\n    if (!confirmed) return;\r\n\r\n    await deleteById(food.id);\r\n    toast.success(`\"${food.name}\" Has Been Removed!`);\r\n    setFoods(foods.filter(f => f.id !== food.id));\r\n  };\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <div className={classes.list}>\r\n        <Title title=\"Manage Foods\" margin=\"1rem auto\" />\r\n        <Search\r\n          searchRoute=\"/admin/foods/\"\r\n          defaultRoute=\"/admin/foods\"\r\n          margin=\"1rem 0\"\r\n          placeholder=\"Search Foods\"\r\n        />\r\n        <Link to=\"/admin/addFood\" className={classes.add_food}>\r\n          Add Food +\r\n        </Link>\r\n        <FoodsNotFound />\r\n        {foods &&\r\n          foods.map(food => (\r\n            <div key={food.id} className={classes.list_item}>\r\n              <img src={food.imageUrl} alt={food.name} />\r\n              <Link to={'/food/' + food.id}>{food.name}</Link>\r\n              <Price price={food.price} />\r\n              <div className={classes.actions}>\r\n                <Link to={'/admin/editFood/' + food.id}>Edit</Link>\r\n                <Link onClick={() => deleteFood(food)}>Delete</Link>\r\n              </div>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}