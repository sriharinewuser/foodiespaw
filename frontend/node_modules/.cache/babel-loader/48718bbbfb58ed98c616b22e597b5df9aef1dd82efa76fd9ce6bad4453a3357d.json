{"ast":null,"code":"import _regeneratorRuntime from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useParams}from'react-router-dom';import classes from'./foodEdit.module.css';import{useForm}from'react-hook-form';import{useEffect,useState}from'react';import{add,getById,update}from'../../services/foodService';import Title from'../../components/Title/Title';import InputContainer from'../../components/InputContainer/InputContainer';import Input from'../../components/Input/Input';import Button from'../../components/Button/Button';import{uploadImage}from'../../services/uploadService';import{toast}from'react-toastify';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function FoodEditPage(){var _useParams=useParams(),foodId=_useParams.foodId;var _useState=useState(),_useState2=_slicedToArray(_useState,2),imageUrl=_useState2[0],setImageUrl=_useState2[1];var isEditMode=!!foodId;var navigate=useNavigate();var _useForm=useForm(),handleSubmit=_useForm.handleSubmit,register=_useForm.register,errors=_useForm.formState.errors,reset=_useForm.reset;useEffect(function(){if(!isEditMode)return;getById(foodId).then(function(food){if(!food)return;reset(food);setImageUrl(food.imageUrl);});},[foodId]);var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(foodData){var food,newFood;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:food=_objectSpread(_objectSpread({},foodData),{},{imageUrl:imageUrl});if(!isEditMode){_context.next=6;break;}_context.next=4;return update(food);case 4:toast.success(\"Food \\\"\".concat(food.name,\"\\\" updated successfully!\"));return _context.abrupt(\"return\");case 6:_context.next=8;return add(food);case 8:newFood=_context.sent;toast.success(\"Food \\\"\".concat(food.name,\"\\\" added successfully!\"));navigate('/admin/editFood/'+newFood.id,{replace:true});case 11:case\"end\":return _context.stop();}},_callee);}));return function submit(_x){return _ref.apply(this,arguments);};}();var upload=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var imageUrl;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setImageUrl(null);_context2.next=3;return uploadImage(event);case 3:imageUrl=_context2.sent;setImageUrl(imageUrl);case 5:case\"end\":return _context2.stop();}},_callee2);}));return function upload(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:classes.container,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.content,children:[/*#__PURE__*/_jsx(Title,{title:isEditMode?'Edit Food':'Add Food'}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,onSubmit:handleSubmit(submit),noValidate:true,children:[/*#__PURE__*/_jsx(InputContainer,{label:\"Select Image\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:upload,accept:\"image/jpeg\"})}),imageUrl&&/*#__PURE__*/_jsx(\"a\",{href:imageUrl,className:classes.image_link,target:\"blank\",children:/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:\"Uploaded\"})}),/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({type:\"text\",label:\"Name\"},register('name',{required:true,minLength:5})),{},{error:errors.name})),/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({type:\"number\",label:\"Price\"},register('price',{required:true})),{},{error:errors.price})),/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({type:\"text\",label:\"Tags\"},register('tags')),{},{error:errors.tags})),/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({type:\"text\",label:\"Origins\"},register('origins',{required:true})),{},{error:errors.origins})),/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({type:\"text\",label:\"Cook Time\"},register('cookTime',{required:true})),{},{error:errors.cookTime})),/*#__PURE__*/_jsx(Button,{type:\"submit\",text:isEditMode?'Update':'Create'})]})]})});}","map":{"version":3,"names":["useParams","classes","useForm","useEffect","useState","add","getById","update","Title","InputContainer","Input","Button","uploadImage","toast","useNavigate","jsx","_jsx","jsxs","_jsxs","FoodEditPage","_useParams","foodId","_useState","_useState2","_slicedToArray","imageUrl","setImageUrl","isEditMode","navigate","_useForm","handleSubmit","register","errors","formState","reset","then","food","submit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","foodData","newFood","wrap","_callee$","_context","prev","next","_objectSpread","success","concat","name","abrupt","sent","id","replace","stop","_x","apply","arguments","upload","_ref2","_callee2","event","_callee2$","_context2","_x2","className","container","children","content","title","form","onSubmit","noValidate","label","type","onChange","accept","href","image_link","target","src","alt","required","minLength","error","price","tags","origins","cookTime","text"],"sources":["E:/foodiespaw/frontend/src/pages/FoodEdit/FoodEditPage.js"],"sourcesContent":["import { useParams } from 'react-router-dom';\r\nimport classes from './foodEdit.module.css';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useEffect, useState } from 'react';\r\nimport { add, getById, update } from '../../services/foodService';\r\nimport Title from '../../components/Title/Title';\r\nimport InputContainer from '../../components/InputContainer/InputContainer';\r\nimport Input from '../../components/Input/Input';\r\nimport Button from '../../components/Button/Button';\r\nimport { uploadImage } from '../../services/uploadService';\r\nimport { toast } from 'react-toastify';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function FoodEditPage() {\r\n  const { foodId } = useParams();\r\n  const [imageUrl, setImageUrl] = useState();\r\n  const isEditMode = !!foodId;\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    formState: { errors },\r\n    reset,\r\n  } = useForm();\r\n\r\n  useEffect(() => {\r\n    if (!isEditMode) return;\r\n\r\n    getById(foodId).then(food => {\r\n      if (!food) return;\r\n      reset(food);\r\n      setImageUrl(food.imageUrl);\r\n    });\r\n  }, [foodId]);\r\n\r\n  const submit = async foodData => {\r\n    const food = { ...foodData, imageUrl };\r\n\r\n    if (isEditMode) {\r\n      await update(food);\r\n      toast.success(`Food \"${food.name}\" updated successfully!`);\r\n      return;\r\n    }\r\n\r\n    const newFood = await add(food);\r\n    toast.success(`Food \"${food.name}\" added successfully!`);\r\n    navigate('/admin/editFood/' + newFood.id, { replace: true });\r\n  };\r\n\r\n  const upload = async event => {\r\n    setImageUrl(null);\r\n    const imageUrl = await uploadImage(event);\r\n    setImageUrl(imageUrl);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <div className={classes.content}>\r\n        <Title title={isEditMode ? 'Edit Food' : 'Add Food'} />\r\n        <form\r\n          className={classes.form}\r\n          onSubmit={handleSubmit(submit)}\r\n          noValidate\r\n        >\r\n          <InputContainer label=\"Select Image\">\r\n            <input type=\"file\" onChange={upload} accept=\"image/jpeg\" />\r\n          </InputContainer>\r\n\r\n          {imageUrl && (\r\n            <a href={imageUrl} className={classes.image_link} target=\"blank\">\r\n              <img src={imageUrl} alt=\"Uploaded\" />\r\n            </a>\r\n          )}\r\n\r\n          <Input\r\n            type=\"text\"\r\n            label=\"Name\"\r\n            {...register('name', { required: true, minLength: 5 })}\r\n            error={errors.name}\r\n          />\r\n\r\n          <Input\r\n            type=\"number\"\r\n            label=\"Price\"\r\n            {...register('price', { required: true })}\r\n            error={errors.price}\r\n          />\r\n\r\n          <Input\r\n            type=\"text\"\r\n            label=\"Tags\"\r\n            {...register('tags')}\r\n            error={errors.tags}\r\n          />\r\n\r\n          <Input\r\n            type=\"text\"\r\n            label=\"Origins\"\r\n            {...register('origins', { required: true })}\r\n            error={errors.origins}\r\n          />\r\n\r\n          <Input\r\n            type=\"text\"\r\n            label=\"Cook Time\"\r\n            {...register('cookTime', { required: true })}\r\n            error={errors.cookTime}\r\n          />\r\n\r\n          <Button type=\"submit\" text={isEditMode ? 'Update' : 'Create'} />\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"+bAAA,OAASA,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,CAAAC,OAAO,KAAM,uBAAuB,CAC3C,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,GAAG,CAAEC,OAAO,CAAEC,MAAM,KAAQ,4BAA4B,CACjE,MAAO,CAAAC,KAAK,KAAM,8BAA8B,CAChD,MAAO,CAAAC,cAAc,KAAM,gDAAgD,CAC3E,MAAO,CAAAC,KAAK,KAAM,8BAA8B,CAChD,MAAO,CAAAC,MAAM,KAAM,gCAAgC,CACnD,OAASC,WAAW,KAAQ,8BAA8B,CAC1D,OAASC,KAAK,KAAQ,gBAAgB,CACtC,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/C,cAAe,SAAS,CAAAC,YAAYA,CAAA,CAAG,CACrC,IAAAC,UAAA,CAAmBpB,SAAS,EAAE,CAAtBqB,MAAM,CAAAD,UAAA,CAANC,MAAM,CACd,IAAAC,SAAA,CAAgClB,QAAQ,EAAE,CAAAmB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAnCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,GAAM,CAAAI,UAAU,CAAG,CAAC,CAACN,MAAM,CAE3B,GAAM,CAAAO,QAAQ,CAAGd,WAAW,EAAE,CAE9B,IAAAe,QAAA,CAKI3B,OAAO,EAAE,CAJX4B,YAAY,CAAAD,QAAA,CAAZC,YAAY,CACZC,QAAQ,CAAAF,QAAA,CAARE,QAAQ,CACKC,MAAM,CAAAH,QAAA,CAAnBI,SAAS,CAAID,MAAM,CACnBE,KAAK,CAAAL,QAAA,CAALK,KAAK,CAGP/B,SAAS,CAAC,UAAM,CACd,GAAI,CAACwB,UAAU,CAAE,OAEjBrB,OAAO,CAACe,MAAM,CAAC,CAACc,IAAI,CAAC,SAAAC,IAAI,CAAI,CAC3B,GAAI,CAACA,IAAI,CAAE,OACXF,KAAK,CAACE,IAAI,CAAC,CACXV,WAAW,CAACU,IAAI,CAACX,QAAQ,CAAC,CAC5B,CAAC,CAAC,CACJ,CAAC,CAAE,CAACJ,MAAM,CAAC,CAAC,CAEZ,GAAM,CAAAgB,MAAM,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAMC,QAAQ,MAAAP,IAAA,CAAAQ,OAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACrBb,IAAI,CAAAc,aAAA,CAAAA,aAAA,IAAQP,QAAQ,MAAElB,QAAQ,CAARA,QAAQ,OAEhCE,UAAU,EAAAoB,QAAA,CAAAE,IAAA,UAAAF,QAAA,CAAAE,IAAA,SACN,CAAA1C,MAAM,CAAC6B,IAAI,CAAC,QAClBvB,KAAK,CAACsC,OAAO,WAAAC,MAAA,CAAUhB,IAAI,CAACiB,IAAI,6BAA0B,CAAC,OAAAN,QAAA,CAAAO,MAAA,kBAAAP,QAAA,CAAAE,IAAA,SAIvC,CAAA5C,GAAG,CAAC+B,IAAI,CAAC,QAAzBQ,OAAO,CAAAG,QAAA,CAAAQ,IAAA,CACb1C,KAAK,CAACsC,OAAO,WAAAC,MAAA,CAAUhB,IAAI,CAACiB,IAAI,2BAAwB,CACxDzB,QAAQ,CAAC,kBAAkB,CAAGgB,OAAO,CAACY,EAAE,CAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAAC,CAAC,yBAAAV,QAAA,CAAAW,IAAA,MAAAhB,OAAA,GAC9D,kBAZK,CAAAL,MAAMA,CAAAsB,EAAA,SAAArB,IAAA,CAAAsB,KAAA,MAAAC,SAAA,OAYX,CAED,GAAM,CAAAC,MAAM,6BAAAC,KAAA,CAAAxB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAuB,SAAMC,KAAK,MAAAxC,QAAA,QAAAe,mBAAA,GAAAK,IAAA,UAAAqB,UAAAC,SAAA,iBAAAA,SAAA,CAAAnB,IAAA,CAAAmB,SAAA,CAAAlB,IAAA,SACxBvB,WAAW,CAAC,IAAI,CAAC,CAACyC,SAAA,CAAAlB,IAAA,SACK,CAAArC,WAAW,CAACqD,KAAK,CAAC,QAAnCxC,QAAQ,CAAA0C,SAAA,CAAAZ,IAAA,CACd7B,WAAW,CAACD,QAAQ,CAAC,CAAC,wBAAA0C,SAAA,CAAAT,IAAA,MAAAM,QAAA,GACvB,kBAJK,CAAAF,MAAMA,CAAAM,GAAA,SAAAL,KAAA,CAAAH,KAAA,MAAAC,SAAA,OAIX,CAED,mBACE7C,IAAA,QAAKqD,SAAS,CAAEpE,OAAO,CAACqE,SAAU,CAAAC,QAAA,cAChCrD,KAAA,QAAKmD,SAAS,CAAEpE,OAAO,CAACuE,OAAQ,CAAAD,QAAA,eAC9BvD,IAAA,CAACR,KAAK,EAACiE,KAAK,CAAE9C,UAAU,CAAG,WAAW,CAAG,UAAW,EAAG,cACvDT,KAAA,SACEmD,SAAS,CAAEpE,OAAO,CAACyE,IAAK,CACxBC,QAAQ,CAAE7C,YAAY,CAACO,MAAM,CAAE,CAC/BuC,UAAU,MAAAL,QAAA,eAEVvD,IAAA,CAACP,cAAc,EAACoE,KAAK,CAAC,cAAc,CAAAN,QAAA,cAClCvD,IAAA,UAAO8D,IAAI,CAAC,MAAM,CAACC,QAAQ,CAAEjB,MAAO,CAACkB,MAAM,CAAC,YAAY,EAAG,EAC5C,CAEhBvD,QAAQ,eACPT,IAAA,MAAGiE,IAAI,CAAExD,QAAS,CAAC4C,SAAS,CAAEpE,OAAO,CAACiF,UAAW,CAACC,MAAM,CAAC,OAAO,CAAAZ,QAAA,cAC9DvD,IAAA,QAAKoE,GAAG,CAAE3D,QAAS,CAAC4D,GAAG,CAAC,UAAU,EAAG,EAExC,cAEDrE,IAAA,CAACN,KAAK,CAAAwC,aAAA,CAAAA,aAAA,EACJ4B,IAAI,CAAC,MAAM,CACXD,KAAK,CAAC,MAAM,EACR9C,QAAQ,CAAC,MAAM,CAAE,CAAEuD,QAAQ,CAAE,IAAI,CAAEC,SAAS,CAAE,CAAE,CAAC,CAAC,MACtDC,KAAK,CAAExD,MAAM,CAACqB,IAAK,GACnB,cAEFrC,IAAA,CAACN,KAAK,CAAAwC,aAAA,CAAAA,aAAA,EACJ4B,IAAI,CAAC,QAAQ,CACbD,KAAK,CAAC,OAAO,EACT9C,QAAQ,CAAC,OAAO,CAAE,CAAEuD,QAAQ,CAAE,IAAK,CAAC,CAAC,MACzCE,KAAK,CAAExD,MAAM,CAACyD,KAAM,GACpB,cAEFzE,IAAA,CAACN,KAAK,CAAAwC,aAAA,CAAAA,aAAA,EACJ4B,IAAI,CAAC,MAAM,CACXD,KAAK,CAAC,MAAM,EACR9C,QAAQ,CAAC,MAAM,CAAC,MACpByD,KAAK,CAAExD,MAAM,CAAC0D,IAAK,GACnB,cAEF1E,IAAA,CAACN,KAAK,CAAAwC,aAAA,CAAAA,aAAA,EACJ4B,IAAI,CAAC,MAAM,CACXD,KAAK,CAAC,SAAS,EACX9C,QAAQ,CAAC,SAAS,CAAE,CAAEuD,QAAQ,CAAE,IAAK,CAAC,CAAC,MAC3CE,KAAK,CAAExD,MAAM,CAAC2D,OAAQ,GACtB,cAEF3E,IAAA,CAACN,KAAK,CAAAwC,aAAA,CAAAA,aAAA,EACJ4B,IAAI,CAAC,MAAM,CACXD,KAAK,CAAC,WAAW,EACb9C,QAAQ,CAAC,UAAU,CAAE,CAAEuD,QAAQ,CAAE,IAAK,CAAC,CAAC,MAC5CE,KAAK,CAAExD,MAAM,CAAC4D,QAAS,GACvB,cAEF5E,IAAA,CAACL,MAAM,EAACmE,IAAI,CAAC,QAAQ,CAACe,IAAI,CAAElE,UAAU,CAAG,QAAQ,CAAG,QAAS,EAAG,GAC3D,GACH,EACF,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}