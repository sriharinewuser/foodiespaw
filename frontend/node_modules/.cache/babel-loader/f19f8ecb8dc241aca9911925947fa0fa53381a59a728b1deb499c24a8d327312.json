{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link,useParams}from'react-router-dom';import{useAuth}from'../../hooks/useAuth';import{getAll,toggleBlock}from'../../services/userService';import classes from'./usersPage.module.css';import Title from'../../components/Title/Title';import Search from'../../components/Search/Search';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UsersPage(){const[users,setUsers]=useState();const{searchTerm}=useParams();const auth=useAuth();useEffect(()=>{loadUsers();},[searchTerm]);const loadUsers=async()=>{const users=await getAll(searchTerm);setUsers(users);};const handleToggleBlock=async userId=>{const isBlocked=await toggleBlock(userId);setUsers(oldUsers=>oldUsers.map(user=>user.id===userId?{...user,isBlocked}:user));};return/*#__PURE__*/_jsx(\"div\",{className:classes.container,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.list,children:[/*#__PURE__*/_jsx(Title,{title:\"Manage Users\"}),/*#__PURE__*/_jsx(Search,{searchRoute:\"/admin/users/\",defaultRoute:\"/admin/users\",placeholder:\"Search Users\",margin:\"1rem 0\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.list_item,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Admin\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Actions\"})]}),users&&users.map(user=>/*#__PURE__*/_jsxs(\"div\",{className:classes.list_item,children:[/*#__PURE__*/_jsx(\"span\",{children:user.name}),/*#__PURE__*/_jsx(\"span\",{children:user.email}),/*#__PURE__*/_jsx(\"span\",{children:user.address}),/*#__PURE__*/_jsx(\"span\",{children:user.isAdmin?'✅':'❌'}),/*#__PURE__*/_jsxs(\"span\",{className:classes.actions,children:[/*#__PURE__*/_jsx(Link,{to:'/admin/editUser/'+user.id,children:\"Edit\"}),auth.user.id!==user.id&&/*#__PURE__*/_jsx(Link,{onClick:()=>handleToggleBlock(user.id),children:user.isBlocked?'Unblock':'Block'})]})]},user.id))]})});}","map":{"version":3,"names":["React","useEffect","useState","Link","useParams","useAuth","getAll","toggleBlock","classes","Title","Search","jsx","_jsx","jsxs","_jsxs","UsersPage","users","setUsers","searchTerm","auth","loadUsers","handleToggleBlock","userId","isBlocked","oldUsers","map","user","id","className","container","children","list","title","searchRoute","defaultRoute","placeholder","margin","list_item","name","email","address","isAdmin","actions","to","onClick"],"sources":["E:/foodiespaw/frontend/src/pages/UsersPage/UsersPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { useAuth } from '../../hooks/useAuth';\r\nimport { getAll, toggleBlock } from '../../services/userService';\r\nimport classes from './usersPage.module.css';\r\nimport Title from '../../components/Title/Title';\r\nimport Search from '../../components/Search/Search';\r\n\r\nexport default function UsersPage() {\r\n  const [users, setUsers] = useState();\r\n  const { searchTerm } = useParams();\r\n  const auth = useAuth();\r\n\r\n  useEffect(() => {\r\n    loadUsers();\r\n  }, [searchTerm]);\r\n\r\n  const loadUsers = async () => {\r\n    const users = await getAll(searchTerm);\r\n    setUsers(users);\r\n  };\r\n\r\n  const handleToggleBlock = async userId => {\r\n    const isBlocked = await toggleBlock(userId);\r\n\r\n    setUsers(oldUsers =>\r\n      oldUsers.map(user => (user.id === userId ? { ...user, isBlocked } : user))\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <div className={classes.list}>\r\n        <Title title=\"Manage Users\" />\r\n        <Search\r\n          searchRoute=\"/admin/users/\"\r\n          defaultRoute=\"/admin/users\"\r\n          placeholder=\"Search Users\"\r\n          margin=\"1rem 0\"\r\n        />\r\n        <div className={classes.list_item}>\r\n          <h3>Name</h3>\r\n          <h3>Email</h3>\r\n          <h3>Address</h3>\r\n          <h3>Admin</h3>\r\n          <h3>Actions</h3>\r\n        </div>\r\n        {users &&\r\n          users.map(user => (\r\n            <div key={user.id} className={classes.list_item}>\r\n              <span>{user.name}</span>\r\n              <span>{user.email}</span>\r\n              <span>{user.address}</span>\r\n              <span>{user.isAdmin ? '✅' : '❌'}</span>\r\n              <span className={classes.actions}>\r\n                <Link to={'/admin/editUser/' + user.id}>Edit</Link>\r\n                {auth.user.id !== user.id && (\r\n                  <Link onClick={() => handleToggleBlock(user.id)}>\r\n                    {user.isBlocked ? 'Unblock' : 'Block'}\r\n                  </Link>\r\n                )}\r\n              </span>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}