{"ast":null,"code":"import _objectSpread from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Link,useParams}from'react-router-dom';import{useAuth}from'../../hooks/useAuth';import{getAll,toggleBlock}from'../../services/userService';import classes from'./usersPage.module.css';import Title from'../../components/Title/Title';import Search from'../../components/Search/Search';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UsersPage(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useParams=useParams(),searchTerm=_useParams.searchTerm;var auth=useAuth();useEffect(function(){loadUsers();},[searchTerm]);var loadUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var users;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getAll(searchTerm);case 2:users=_context.sent;setUsers(users);case 4:case\"end\":return _context.stop();}},_callee);}));return function loadUsers(){return _ref.apply(this,arguments);};}();var handleToggleBlock=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(userId){var isBlocked;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return toggleBlock(userId);case 2:isBlocked=_context2.sent;setUsers(function(oldUsers){return oldUsers.map(function(user){return user.id===userId?_objectSpread(_objectSpread({},user),{},{isBlocked:isBlocked}):user;});});case 4:case\"end\":return _context2.stop();}},_callee2);}));return function handleToggleBlock(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:classes.container,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.list,children:[/*#__PURE__*/_jsx(Title,{title:\"Manage Users\"}),/*#__PURE__*/_jsx(Search,{searchRoute:\"/admin/users/\",defaultRoute:\"/admin/users\",placeholder:\"Search Users\",margin:\"1rem 0\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.list_item,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Admin\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Actions\"})]}),users&&users.map(function(user){return/*#__PURE__*/_jsxs(\"div\",{className:classes.list_item,children:[/*#__PURE__*/_jsx(\"span\",{children:user.name}),/*#__PURE__*/_jsx(\"span\",{children:user.email}),/*#__PURE__*/_jsx(\"span\",{children:user.address}),/*#__PURE__*/_jsx(\"span\",{children:user.isAdmin?'✅':'❌'}),/*#__PURE__*/_jsxs(\"span\",{className:classes.actions,children:[/*#__PURE__*/_jsx(Link,{to:'/admin/editUser/'+user.id,children:\"Edit\"}),auth.user.id!==user.id&&/*#__PURE__*/_jsx(Link,{onClick:function onClick(){return handleToggleBlock(user.id);},children:user.isBlocked?'Unblock':'Block'})]})]},user.id);})]})});}","map":{"version":3,"names":["React","useEffect","useState","Link","useParams","useAuth","getAll","toggleBlock","classes","Title","Search","jsx","_jsx","jsxs","_jsxs","UsersPage","_useState","_useState2","_slicedToArray","users","setUsers","_useParams","searchTerm","auth","loadUsers","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","sent","stop","apply","arguments","handleToggleBlock","_ref2","_callee2","userId","isBlocked","_callee2$","_context2","oldUsers","map","user","id","_objectSpread","_x","className","container","children","list","title","searchRoute","defaultRoute","placeholder","margin","list_item","name","email","address","isAdmin","actions","to","onClick"],"sources":["E:/foodiespaw/frontend/src/pages/UsersPage/UsersPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { useAuth } from '../../hooks/useAuth';\r\nimport { getAll, toggleBlock } from '../../services/userService';\r\nimport classes from './usersPage.module.css';\r\nimport Title from '../../components/Title/Title';\r\nimport Search from '../../components/Search/Search';\r\n\r\nexport default function UsersPage() {\r\n  const [users, setUsers] = useState();\r\n  const { searchTerm } = useParams();\r\n  const auth = useAuth();\r\n\r\n  useEffect(() => {\r\n    loadUsers();\r\n  }, [searchTerm]);\r\n\r\n  const loadUsers = async () => {\r\n    const users = await getAll(searchTerm);\r\n    setUsers(users);\r\n  };\r\n\r\n  const handleToggleBlock = async userId => {\r\n    const isBlocked = await toggleBlock(userId);\r\n\r\n    setUsers(oldUsers =>\r\n      oldUsers.map(user => (user.id === userId ? { ...user, isBlocked } : user))\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <div className={classes.list}>\r\n        <Title title=\"Manage Users\" />\r\n        <Search\r\n          searchRoute=\"/admin/users/\"\r\n          defaultRoute=\"/admin/users\"\r\n          placeholder=\"Search Users\"\r\n          margin=\"1rem 0\"\r\n        />\r\n        <div className={classes.list_item}>\r\n          <h3>Name</h3>\r\n          <h3>Email</h3>\r\n          <h3>Address</h3>\r\n          <h3>Admin</h3>\r\n          <h3>Actions</h3>\r\n        </div>\r\n        {users &&\r\n          users.map(user => (\r\n            <div key={user.id} className={classes.list_item}>\r\n              <span>{user.name}</span>\r\n              <span>{user.email}</span>\r\n              <span>{user.address}</span>\r\n              <span>{user.isAdmin ? '✅' : '❌'}</span>\r\n              <span className={classes.actions}>\r\n                <Link to={'/admin/editUser/' + user.id}>Edit</Link>\r\n                {auth.user.id !== user.id && (\r\n                  <Link onClick={() => handleToggleBlock(user.id)}>\r\n                    {user.isBlocked ? 'Unblock' : 'Block'}\r\n                  </Link>\r\n                )}\r\n              </span>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}