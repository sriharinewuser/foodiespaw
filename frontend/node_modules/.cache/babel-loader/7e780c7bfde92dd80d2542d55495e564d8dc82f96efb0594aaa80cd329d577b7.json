{"ast":null,"code":"import _regeneratorRuntime from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,createContext,useContext}from'react';import*as userService from'../services/userService';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/createContext(null);export var AuthProvider=function AuthProvider(_ref){var children=_ref.children;var _useState=useState(userService.getUser()),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password){var _user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return userService.login(email,password);case 3:_user=_context.sent;setUser(_user);toast.success('Login Successful');_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);toast.error(_context.t0.response.data);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function login(_x,_x2){return _ref2.apply(this,arguments);};}();var register=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){var _user2;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return userService.register(data);case 3:_user2=_context2.sent;setUser(_user2);toast.success('Register Successful');_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);toast.error(_context2.t0.response.data);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}));return function register(_x3){return _ref3.apply(this,arguments);};}();var logout=function logout(){userService.logout();setUser(null);toast.success('Logout Successful');};var updateProfile=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(user){var updatedUser;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return userService.updateProfile(user);case 2:updatedUser=_context3.sent;toast.success('Profile Update Was Successful');if(updatedUser)setUser(updatedUser);case 5:case\"end\":return _context3.stop();}},_callee3);}));return function updateProfile(_x4){return _ref4.apply(this,arguments);};}();var changePassword=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(passwords){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return userService.changePassword(passwords);case 2:logout();toast.success('Password Changed Successfully, Please Login Again!');case 4:case\"end\":return _context4.stop();}},_callee4);}));return function changePassword(_x5){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user:user,login:login,logout:logout,register:register,updateProfile:updateProfile,changePassword:changePassword},children:children});};export var useAuth=function useAuth(){return useContext(AuthContext);};","map":{"version":3,"names":["useState","createContext","useContext","userService","toast","jsx","_jsx","AuthContext","AuthProvider","_ref","children","_useState","getUser","_useState2","_slicedToArray","user","setUser","login","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","email","password","_user","wrap","_callee$","_context","prev","next","sent","success","t0","error","response","data","stop","_x","_x2","apply","arguments","register","_ref3","_callee2","_user2","_callee2$","_context2","_x3","logout","updateProfile","_ref4","_callee3","updatedUser","_callee3$","_context3","_x4","changePassword","_ref5","_callee4","passwords","_callee4$","_context4","_x5","Provider","value","useAuth"],"sources":["E:/foodiespaw/frontend/src/hooks/useAuth.js"],"sourcesContent":["import { useState, createContext, useContext } from 'react';\r\nimport * as userService from '../services/userService';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst AuthContext = createContext(null);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(userService.getUser());\r\n\r\n  const login = async (email, password) => {\r\n    try {\r\n      const user = await userService.login(email, password);\r\n      setUser(user);\r\n      toast.success('Login Successful');\r\n    } catch (err) {\r\n      toast.error(err.response.data);\r\n    }\r\n  };\r\n\r\n  const register = async data => {\r\n    try {\r\n      const user = await userService.register(data);\r\n      setUser(user);\r\n      toast.success('Register Successful');\r\n    } catch (err) {\r\n      toast.error(err.response.data);\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    userService.logout();\r\n    setUser(null);\r\n    toast.success('Logout Successful');\r\n  };\r\n\r\n  const updateProfile = async user => {\r\n    const updatedUser = await userService.updateProfile(user);\r\n    toast.success('Profile Update Was Successful');\r\n    if (updatedUser) setUser(updatedUser);\r\n  };\r\n\r\n  const changePassword = async passwords => {\r\n    await userService.changePassword(passwords);\r\n    logout();\r\n    toast.success('Password Changed Successfully, Please Login Again!');\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{ user, login, logout ,register,updateProfile,changePassword}}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}