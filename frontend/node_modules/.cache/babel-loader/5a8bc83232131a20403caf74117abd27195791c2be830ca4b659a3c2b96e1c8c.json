{"ast":null,"code":"import _regeneratorRuntime from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useCart}from'../../hooks/useCart';import{useAuth}from'../../hooks/useAuth';import{useNavigate}from'react-router-dom';import{useState}from'react';import{useForm}from'react-hook-form';import{toast}from'react-toastify';import{createOrder}from'../../services/orderService';import classes from'./checkoutPage.module.css';import Title from'../../components/Title/Title';import Input from'../../components/Input/Input';import Button from'../../components/Button/Button';import OrderItemsList from'../../components/OrderItemsList/OrderItemsList';import Map from'../../components/Map/Map';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function CheckoutPage(){var _useCart=useCart(),cart=_useCart.cart;var _useAuth=useAuth(),user=_useAuth.user;var navigate=useNavigate();var _useState=useState(_objectSpread({},cart)),_useState2=_slicedToArray(_useState,2),order=_useState2[0],setOrder=_useState2[1];var _useForm=useForm(),register=_useForm.register,errors=_useForm.formState.errors,handleSubmit=_useForm.handleSubmit;var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(order.addressLatLng){_context.next=3;break;}toast.warning('Please select your location on the map');return _context.abrupt(\"return\");case 3:_context.next=5;return createOrder(_objectSpread(_objectSpread({},order),{},{name:data.name,address:data.address}));case 5:navigate('/payment');case 6:case\"end\":return _context.stop();}},_callee);}));return function submit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(submit),className:classes.container,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.content,children:[/*#__PURE__*/_jsx(Title,{title:\"Order Form\",fontSize:\"1.6rem\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.inputs,children:[/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({defaultValue:user.name,label:\"Name\"},register('name')),{},{error:errors.name})),/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({defaultValue:user.address,label:\"Address\"},register('address')),{},{error:errors.address}))]}),/*#__PURE__*/_jsx(OrderItemsList,{order:order})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Title,{title:\"Choose Your Location\",fontSize:\"1.6rem\"}),/*#__PURE__*/_jsx(Map,{location:order.addressLatLng,onChange:function onChange(latlng){console.log(latlng);setOrder(_objectSpread(_objectSpread({},order),{},{addressLatLng:latlng}));}})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.buttons_container,children:/*#__PURE__*/_jsx(\"div\",{className:classes.buttons,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",text:\"Go To Payment\",width:\"100%\",height:\"3rem\"})})})]})});}","map":{"version":3,"names":["React","useCart","useAuth","useNavigate","useState","useForm","toast","createOrder","classes","Title","Input","Button","OrderItemsList","Map","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CheckoutPage","_useCart","cart","_useAuth","user","navigate","_useState","_objectSpread","_useState2","_slicedToArray","order","setOrder","_useForm","register","errors","formState","handleSubmit","submit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","addressLatLng","warning","abrupt","name","address","stop","_x","apply","arguments","children","onSubmit","className","container","content","title","fontSize","inputs","defaultValue","label","error","location","onChange","latlng","console","log","buttons_container","buttons","type","text","width","height"],"sources":["E:/foodiespaw/frontend/src/pages/Checkout/CheckoutPage.js"],"sourcesContent":["import React from 'react';\r\nimport { useCart } from '../../hooks/useCart';\r\nimport { useAuth } from '../../hooks/useAuth';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { toast } from 'react-toastify';\r\nimport { createOrder } from '../../services/orderService';\r\nimport classes from './checkoutPage.module.css';\r\nimport Title from '../../components/Title/Title';\r\nimport Input from '../../components/Input/Input';\r\nimport Button from '../../components/Button/Button';\r\nimport OrderItemsList from '../../components/OrderItemsList/OrderItemsList';\r\nimport Map from '../../components/Map/Map';\r\nexport default function CheckoutPage() {\r\n  const { cart } = useCart();\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [order, setOrder] = useState({ ...cart });\r\n\r\n  const {\r\n    register,\r\n    formState: { errors },\r\n    handleSubmit,\r\n  } = useForm();\r\n\r\n  const submit = async data => {\r\n    if (!order.addressLatLng) {\r\n      toast.warning('Please select your location on the map');\r\n      return;\r\n    }\r\n\r\n    await createOrder({ ...order, name: data.name, address: data.address });\r\n    navigate('/payment');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={handleSubmit(submit)} className={classes.container}>\r\n        <div className={classes.content}>\r\n          <Title title=\"Order Form\" fontSize=\"1.6rem\" />\r\n          <div className={classes.inputs}>\r\n            <Input\r\n              defaultValue={user.name}\r\n              label=\"Name\"\r\n              {...register('name')}\r\n              error={errors.name}\r\n            />\r\n            <Input\r\n              defaultValue={user.address}\r\n              label=\"Address\"\r\n              {...register('address')}\r\n              error={errors.address}\r\n            />\r\n          </div>\r\n          <OrderItemsList order={order} />\r\n        </div>\r\n        <div>\r\n          <Title title=\"Choose Your Location\" fontSize=\"1.6rem\" />\r\n          <Map\r\n            location={order.addressLatLng}\r\n            onChange={latlng => {\r\n              console.log(latlng);\r\n              setOrder({ ...order, addressLatLng: latlng });\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <div className={classes.buttons_container}>\r\n          <div className={classes.buttons}>\r\n            <Button\r\n              type=\"submit\"\r\n              text=\"Go To Payment\"\r\n              width=\"100%\"\r\n              height=\"3rem\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}