{"ast":null,"code":"import _regeneratorRuntime from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{PayPalButtons,PayPalScriptProvider,usePayPalScriptReducer}from\"@paypal/react-paypal-js\";import React,{useEffect}from\"react\";import{useLoading}from\"../../hooks/useLoading\";import{pay}from\"../../services/orderService\";import{useCart}from\"../../hooks/useCart\";import{toast}from\"react-toastify\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function PaypalButtons(_ref){var order=_ref.order;return/*#__PURE__*/_jsx(PayPalScriptProvider,{options:{clientId:\"ATsGJJnYPYZHixFBEXRNuE_LBjWOsHZXx45UJYlA7ZGDNVNhTLSbwWFwplbQICXjuFnf-0wWr1Wi0am5\"},children:/*#__PURE__*/_jsx(Buttons,{order:order})});}function Buttons(_ref2){var order=_ref2.order;var _useCart=useCart(),clearCart=_useCart.clearCart;var navigate=useNavigate();var _usePayPalScriptReduc=usePayPalScriptReducer(),_usePayPalScriptReduc2=_slicedToArray(_usePayPalScriptReduc,1),isPending=_usePayPalScriptReduc2[0].isPending;var _useLoading=useLoading(),showLoading=_useLoading.showLoading,hideLoading=_useLoading.hideLoading;useEffect(function(){isPending?showLoading():hideLoading();});var createOrder=function createOrder(data,actions){return actions.order.create({purchase_units:[{amount:{currency_code:\"USD\",value:order.totalPrice}}]});};var onApprove=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data,actions){var payment,orderId;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return actions.order.capture();case 3:payment=_context.sent;_context.next=6;return pay(payment.id);case 6:orderId=_context.sent;clearCart();toast.success(\"Payment Saved Successfully\",\"Success\");navigate(\"/track/\"+orderId);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);toast.error(\"Payment Save Failed\",\"Error\");case 15:case\"end\":return _context.stop();}},_callee,null,[[0,12]]);}));return function onApprove(_x,_x2){return _ref3.apply(this,arguments);};}();var onError=function onError(err){toast.error(\"Payment Failed\",\"Error\");};return/*#__PURE__*/_jsx(PayPalButtons,{createOrder:createOrder,onApprove:onApprove,onError:onError});}","map":{"version":3,"names":["PayPalButtons","PayPalScriptProvider","usePayPalScriptReducer","React","useEffect","useLoading","pay","useCart","toast","useNavigate","jsx","_jsx","PaypalButtons","_ref","order","options","clientId","children","Buttons","_ref2","_useCart","clearCart","navigate","_usePayPalScriptReduc","_usePayPalScriptReduc2","_slicedToArray","isPending","_useLoading","showLoading","hideLoading","createOrder","data","actions","create","purchase_units","amount","currency_code","value","totalPrice","onApprove","_ref3","_asyncToGenerator","_regeneratorRuntime","mark","_callee","payment","orderId","wrap","_callee$","_context","prev","next","capture","sent","id","success","t0","error","stop","_x","_x2","apply","arguments","onError","err"],"sources":["E:/foodiespaw/frontend/src/components/PaypalButtons/PaypalButtons.js"],"sourcesContent":["import {\r\n  PayPalButtons,\r\n  PayPalScriptProvider,\r\n  usePayPalScriptReducer,\r\n} from \"@paypal/react-paypal-js\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useLoading } from \"../../hooks/useLoading\";\r\nimport { pay } from \"../../services/orderService\";\r\nimport { useCart } from \"../../hooks/useCart\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function PaypalButtons({ order }) {\r\n  return (\r\n    <PayPalScriptProvider\r\n      options={{\r\n        clientId:\r\n          \"ATsGJJnYPYZHixFBEXRNuE_LBjWOsHZXx45UJYlA7ZGDNVNhTLSbwWFwplbQICXjuFnf-0wWr1Wi0am5\",\r\n      }}\r\n    >\r\n      <Buttons order={order} />\r\n    </PayPalScriptProvider>\r\n  );\r\n}\r\n\r\nfunction Buttons({ order }) {\r\n  const { clearCart } = useCart();\r\n  const navigate = useNavigate();\r\n  const [{ isPending }] = usePayPalScriptReducer();\r\n  const { showLoading, hideLoading } = useLoading();\r\n  useEffect(() => {\r\n    isPending ? showLoading() : hideLoading();\r\n  });\r\n\r\n  const createOrder = (data, actions) => {\r\n    return actions.order.create({\r\n      purchase_units: [\r\n        {\r\n          amount: {\r\n            currency_code: \"USD\",\r\n            value: order.totalPrice,\r\n          },\r\n        },\r\n      ],\r\n    });\r\n  };\r\n\r\n  const onApprove = async (data, actions) => {\r\n    try {\r\n      const payment = await actions.order.capture();\r\n      const orderId = await pay(payment.id);\r\n      clearCart();\r\n      toast.success(\"Payment Saved Successfully\", \"Success\");\r\n      navigate(\"/track/\" + orderId);\r\n    } catch (error) {\r\n      toast.error(\"Payment Save Failed\", \"Error\");\r\n    }\r\n  };\r\n\r\n  const onError = (err) => {\r\n    toast.error(\"Payment Failed\", \"Error\");\r\n  };\r\n\r\n  return (\r\n    <PayPalButtons\r\n      createOrder={createOrder}\r\n      onApprove={onApprove}\r\n      onError={onError}\r\n    />\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}