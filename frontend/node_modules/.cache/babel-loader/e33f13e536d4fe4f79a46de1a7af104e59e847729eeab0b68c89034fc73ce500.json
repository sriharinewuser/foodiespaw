{"ast":null,"code":"import _objectSpread from\"E:/foodiespaw/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useParams}from'react-router-dom';import classes from'./foodEdit.module.css';import{useForm}from'react-hook-form';import{useEffect,useState}from'react';import{add,getById,update}from'../../services/foodService';import Title from'../../components/Title/Title';import InputContainer from'../../components/InputContainer/InputContainer';import Input from'../../components/Input/Input';import Button from'../../components/Button/Button';import{uploadImage}from'../../services/uploadService';import{toast}from'react-toastify';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function FoodEditPage(){const{foodId}=useParams();const[imageUrl,setImageUrl]=useState();const isEditMode=!!foodId;const navigate=useNavigate();const{handleSubmit,register,formState:{errors},reset}=useForm();useEffect(()=>{if(!isEditMode)return;getById(foodId).then(food=>{if(!food)return;reset(food);setImageUrl(food.imageUrl);});},[foodId]);const submit=async foodData=>{const food=_objectSpread(_objectSpread({},foodData),{},{imageUrl});if(isEditMode){await update(food);toast.success(\"Food \\\"\".concat(food.name,\"\\\" updated successfully!\"));return;}const newFood=await add(food);toast.success(\"Food \\\"\".concat(food.name,\"\\\" added successfully!\"));navigate('/admin/editFood/'+newFood.id,{replace:true});};const upload=async event=>{setImageUrl(null);const imageUrl=await uploadImage(event);setImageUrl(imageUrl);};return/*#__PURE__*/_jsx(\"div\",{className:classes.container,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.content,children:[/*#__PURE__*/_jsx(Title,{title:isEditMode?'Edit Food':'Add Food'}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,onSubmit:handleSubmit(submit),noValidate:true,children:[/*#__PURE__*/_jsx(InputContainer,{label:\"Select Image\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:upload,accept:\"image/jpeg\"})}),imageUrl&&/*#__PURE__*/_jsx(\"a\",{href:imageUrl,className:classes.image_link,target:\"blank\",children:/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:\"Uploaded\"})}),/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({type:\"text\",label:\"Name\"},register('name',{required:true,minLength:5})),{},{error:errors.name})),/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({type:\"number\",label:\"Price\"},register('price',{required:true})),{},{error:errors.price})),/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({type:\"text\",label:\"Tags\"},register('tags')),{},{error:errors.tags})),/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({type:\"text\",label:\"Origins\"},register('origins',{required:true})),{},{error:errors.origins})),/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({type:\"text\",label:\"Cook Time\"},register('cookTime',{required:true})),{},{error:errors.cookTime})),/*#__PURE__*/_jsx(Button,{type:\"submit\",text:isEditMode?'Update':'Create'})]})]})});}","map":{"version":3,"names":["useParams","classes","useForm","useEffect","useState","add","getById","update","Title","InputContainer","Input","Button","uploadImage","toast","useNavigate","jsx","_jsx","jsxs","_jsxs","FoodEditPage","foodId","imageUrl","setImageUrl","isEditMode","navigate","handleSubmit","register","formState","errors","reset","then","food","submit","foodData","_objectSpread","success","concat","name","newFood","id","replace","upload","event","className","container","children","content","title","form","onSubmit","noValidate","label","type","onChange","accept","href","image_link","target","src","alt","required","minLength","error","price","tags","origins","cookTime","text"],"sources":["E:/foodiespaw/frontend/src/pages/FoodEdit/FoodEditPage.js"],"sourcesContent":["import { useParams } from 'react-router-dom';\r\nimport classes from './foodEdit.module.css';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useEffect, useState } from 'react';\r\nimport { add, getById, update } from '../../services/foodService';\r\nimport Title from '../../components/Title/Title';\r\nimport InputContainer from '../../components/InputContainer/InputContainer';\r\nimport Input from '../../components/Input/Input';\r\nimport Button from '../../components/Button/Button';\r\nimport { uploadImage } from '../../services/uploadService';\r\nimport { toast } from 'react-toastify';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function FoodEditPage() {\r\n  const { foodId } = useParams();\r\n  const [imageUrl, setImageUrl] = useState();\r\n  const isEditMode = !!foodId;\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    formState: { errors },\r\n    reset,\r\n  } = useForm();\r\n\r\n  useEffect(() => {\r\n    if (!isEditMode) return;\r\n\r\n    getById(foodId).then(food => {\r\n      if (!food) return;\r\n      reset(food);\r\n      setImageUrl(food.imageUrl);\r\n    });\r\n  }, [foodId]);\r\n\r\n  const submit = async foodData => {\r\n    const food = { ...foodData, imageUrl };\r\n\r\n    if (isEditMode) {\r\n      await update(food);\r\n      toast.success(`Food \"${food.name}\" updated successfully!`);\r\n      return;\r\n    }\r\n\r\n    const newFood = await add(food);\r\n    toast.success(`Food \"${food.name}\" added successfully!`);\r\n    navigate('/admin/editFood/' + newFood.id, { replace: true });\r\n  };\r\n\r\n  const upload = async event => {\r\n    setImageUrl(null);\r\n    const imageUrl = await uploadImage(event);\r\n    setImageUrl(imageUrl);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <div className={classes.content}>\r\n        <Title title={isEditMode ? 'Edit Food' : 'Add Food'} />\r\n        <form\r\n          className={classes.form}\r\n          onSubmit={handleSubmit(submit)}\r\n          noValidate\r\n        >\r\n          <InputContainer label=\"Select Image\">\r\n            <input type=\"file\" onChange={upload} accept=\"image/jpeg\" />\r\n          </InputContainer>\r\n\r\n          {imageUrl && (\r\n            <a href={imageUrl} className={classes.image_link} target=\"blank\">\r\n              <img src={imageUrl} alt=\"Uploaded\" />\r\n            </a>\r\n          )}\r\n\r\n          <Input\r\n            type=\"text\"\r\n            label=\"Name\"\r\n            {...register('name', { required: true, minLength: 5 })}\r\n            error={errors.name}\r\n          />\r\n\r\n          <Input\r\n            type=\"number\"\r\n            label=\"Price\"\r\n            {...register('price', { required: true })}\r\n            error={errors.price}\r\n          />\r\n\r\n          <Input\r\n            type=\"text\"\r\n            label=\"Tags\"\r\n            {...register('tags')}\r\n            error={errors.tags}\r\n          />\r\n\r\n          <Input\r\n            type=\"text\"\r\n            label=\"Origins\"\r\n            {...register('origins', { required: true })}\r\n            error={errors.origins}\r\n          />\r\n\r\n          <Input\r\n            type=\"text\"\r\n            label=\"Cook Time\"\r\n            {...register('cookTime', { required: true })}\r\n            error={errors.cookTime}\r\n          />\r\n\r\n          <Button type=\"submit\" text={isEditMode ? 'Update' : 'Create'} />\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}